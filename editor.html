<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#0a0a0a',
                        text: '#e0e0e0',
                        accent: '#3b82f6',
                        'secondary-text': '#a0a0a0',
                        'card-bg': '#171717',
                        'card-hover': '#262626',
                        'border-color': '#333',
                    },
                    fontFamily: {
                        main: ['Outfit', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-bg text-text font-main p-8 max-w-5xl mx-auto">
    <h1 class="text-4xl font-bold text-accent mb-4">Portfolio Editor</h1>
    <p class="mb-8 text-secondary-text">Edit your content below and click "Download Updated Data" to save changes.
        Replace the existing
        <code class="bg-card-bg px-2 py-1 rounded text-accent">js/data.js</code> file with the downloaded one.
    </p>

    <div class="bg-card-bg p-6 rounded-xl border border-border-color mb-8">
        <h2 class="text-2xl font-bold text-accent mb-6">Profile</h2>
        <div class="mb-4">
            <label class="block mb-2 font-medium">First Name</label>
            <input type="text" id="profile-name"
                class="w-full p-3 bg-[#222] border border-border-color text-text rounded focus:outline-none focus:border-accent transition-colors">
        </div>
        <div class="mb-4">
            <label class="block mb-2 font-medium">Last Name</label>
            <input type="text" id="profile-lastname"
                class="w-full p-3 bg-[#222] border border-border-color text-text rounded focus:outline-none focus:border-accent transition-colors">
        </div>
        <div class="mb-4">
            <label class="block mb-2 font-medium">Subtitle</label>
            <input type="text" id="profile-subtitle"
                class="w-full p-3 bg-[#222] border border-border-color text-text rounded focus:outline-none focus:border-accent transition-colors">
        </div>
        <div class="mb-4">
            <label class="block mb-2 font-medium">Description</label>
            <textarea id="profile-desc"
                class="w-full p-3 bg-[#222] border border-border-color text-text rounded min-h-[100px] focus:outline-none focus:border-accent transition-colors"></textarea>
        </div>
    </div>

    <div class="bg-card-bg p-6 rounded-xl border border-border-color mb-8">
        <h2 class="text-2xl font-bold text-accent mb-6">Experience</h2>
        <div id="experience-list" class="space-y-4 mb-4"></div>
        <button class="px-6 py-2 bg-[#444] text-white rounded hover:bg-[#555] transition-colors font-semibold"
            onclick="addItem('experience')">+ Add Experience</button>
    </div>

    <div class="bg-card-bg p-6 rounded-xl border border-border-color mb-8">
        <h2 class="text-2xl font-bold text-accent mb-6">Projects</h2>
        <div id="projects-list" class="space-y-4 mb-4"></div>
        <button class="px-6 py-2 bg-[#444] text-white rounded hover:bg-[#555] transition-colors font-semibold"
            onclick="addItem('projects')">+ Add Project</button>
    </div>

    <div id="save-area"
        class="sticky bottom-8 bg-card-bg p-4 rounded-xl border border-accent flex justify-between items-center shadow-2xl shadow-black/50">
        <span class="font-medium">Ready to save?</span>
        <button class="px-6 py-3 bg-accent text-white rounded hover:opacity-90 transition-opacity font-bold"
            onclick="downloadData()">Download Updated data.js</button>
    </div>

    <script src="js/data.js"></script>
    <script>
        // Load initial data
        document.getElementById('profile-name').value = portfolioData.profile.name;
        document.getElementById('profile-lastname').value = portfolioData.profile.lastName;
        document.getElementById('profile-subtitle').value = portfolioData.profile.subtitle;
        document.getElementById('profile-desc').value = portfolioData.profile.description;

        renderList('experience', portfolioData.experience, (item) => `${item.role} at ${item.company}`);
        renderList('projects', portfolioData.projects, (item) => item.title);

        function renderList(type, data, labelFn) {
            const container = document.getElementById(`${type}-list`);
            container.innerHTML = '';
            data.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'bg-[#222] p-4 rounded flex justify-between items-center';
                div.innerHTML = `
                    <span class="font-medium">${labelFn(item)}</span>
                    <div class="flex gap-2">
                        <button class="px-3 py-1 bg-[#444] text-white rounded hover:bg-[#555] text-sm" onclick="editItem('${type}', ${index})">Edit</button>
                        <button class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600 text-sm" onclick="deleteItem('${type}', ${index})">Delete</button>
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function addItem(type) {
            let newItem;
            if (type === 'experience') {
                newItem = {
                    role: "New Role",
                    company: "Company Name",
                    date: "Date Range",
                    details: ["Detail 1"]
                };
            } else if (type === 'projects') {
                newItem = {
                    title: "New Project",
                    description: "Description",
                    tags: ["Tag1"],
                    details: "Details"
                };
            }
            portfolioData[type].push(newItem);
            // In a real app, we'd show a modal. Here we just re-render and let user edit.
            renderList(type, portfolioData[type], type === 'experience' ? i => `${i.role} at ${i.company}` : i => i.title);
            editItem(type, portfolioData[type].length - 1);
        }

        function deleteItem(type, index) {
            if (confirm('Are you sure?')) {
                portfolioData[type].splice(index, 1);
                renderList(type, portfolioData[type], type === 'experience' ? i => `${i.role} at ${i.company}` : i => i.title);
            }
        }

        function editItem(type, index) {
            const item = portfolioData[type][index];
            const json = prompt("Edit JSON for this item (simple mode):", JSON.stringify(item, null, 2));
            if (json) {
                try {
                    portfolioData[type][index] = JSON.parse(json);
                    renderList(type, portfolioData[type], type === 'experience' ? i => `${i.role} at ${i.company}` : i => i.title);
                } catch (e) {
                    alert("Invalid JSON!");
                }
            }
        }

        function downloadData() {
            // Update profile data from inputs
            portfolioData.profile.name = document.getElementById('profile-name').value;
            portfolioData.profile.lastName = document.getElementById('profile-lastname').value;
            portfolioData.profile.subtitle = document.getElementById('profile-subtitle').value;
            portfolioData.profile.description = document.getElementById('profile-desc').value;

            const dataStr = `const portfolioData = ${JSON.stringify(portfolioData, null, 4)};\n\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = portfolioData;\n}`;
            const blob = new Blob([dataStr], { type: 'text/javascript' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'data.js';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }
    </script>
</body>

</html>